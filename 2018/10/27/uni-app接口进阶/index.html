<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="马云昊">





<title>uni-app接口进阶 | MaYunhao&#39;s Blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">马云昊的技术博客</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">文章</a>
                
                    <a class="menu-item" href="/categories">分类</a>
                
                    <a class="menu-item" href="/tags">标签</a>
                
                    <a class="menu-item" href="/about">关于我</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">马云昊的技术博客</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">文章</a>
                
                    <a class="menu-item" href="/categories">分类</a>
                
                    <a class="menu-item" href="/tags">标签</a>
                
                    <a class="menu-item" href="/about">关于我</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">uni-app接口进阶</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">马云昊</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">十月 27, 2018&nbsp;&nbsp;18:30:22</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/uni-app/">uni-app</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="uni-app"><a href="#uni-app" class="headerlink" title="uni-app"></a><code>uni-app</code></h1><h2 id="1-网络请求篇"><a href="#1-网络请求篇" class="headerlink" title="1.网络请求篇"></a>1.网络请求篇</h2><p><code>uni.request</code>    发起Ajax请求 <code>XMLHTTPREQUEST</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">get_list:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    uni.request(&#123;</span><br><span class="line">        url: <span class="string">'http://127.0.0.1:8000/api/get_list'</span>, <span class="comment">// 请求地址</span></span><br><span class="line">        method: <span class="string">'GET'</span>, <span class="comment">// 请求方式 HTTP 8种请求协议 其中 GET POST DELETE PUT 所有端全部支持</span></span><br><span class="line">        data: &#123;</span><br><span class="line">            name:<span class="string">"DragonFire"</span></span><br><span class="line">        &#125;, <span class="comment">// 请求携带数据</span></span><br><span class="line">        header:&#123;</span><br><span class="line">            <span class="string">"content-type"</span>:<span class="string">"application/json"</span></span><br><span class="line">        &#125;, <span class="comment">// 请求头信息</span></span><br><span class="line">        dataType:<span class="string">'json'</span>, <span class="comment">// 请求返回数据格式</span></span><br><span class="line">        success: <span class="function"><span class="params">res</span> =&gt;</span> &#123;&#125;, <span class="comment">// 请求成功回调函数,res为返回值</span></span><br><span class="line">        fail: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;, <span class="comment">// 请求失败回调函数</span></span><br><span class="line">        complete: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125; <span class="comment">// 请求完成回调函数,无论成功还是失败都会返回</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>uni.uploadFile</code>     上传文件接口  <code>content-type</code> 为 <code>multipart/form-data</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">upload:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 创建上传任务</span></span><br><span class="line">    <span class="keyword">var</span> uptask = uni.uploadFile(&#123;</span><br><span class="line">        url:<span class="string">"http://127.0.0.1:8000/api/upload"</span>, <span class="comment">// 上传地址</span></span><br><span class="line">        filePath:<span class="string">"文件路径"</span>, <span class="comment">// 文件路径</span></span><br><span class="line">        name:<span class="string">"FileKey"</span>, <span class="comment">// 文件key Django后台 request.FILES.get("FileKey")</span></span><br><span class="line">        formData:&#123; <span class="comment">// 额外的数据</span></span><br><span class="line">            username:<span class="string">"DragonFire"</span> <span class="comment">// Django后台 request.POST.get("username")</span></span><br><span class="line">        &#125;,</span><br><span class="line">        success:<span class="function"><span class="params">res</span>=&gt;</span>&#123;&#125;, <span class="comment">// 成功回调函数</span></span><br><span class="line">        fail:<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;, <span class="comment">// 失败回调函数</span></span><br><span class="line">        complete: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125; <span class="comment">// 完成回调函数</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 上传任务进度监听</span></span><br><span class="line">    uptask.onProgressUpdate(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'上传进度'</span> + res.progress);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'已经上传的数据长度'</span> + res.totalBytesSent);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'预期需要上传的数据总长度'</span> + res.totalBytesExpectedToSend);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>uni.downloadFile</code>    下载文件接口 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">download:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    uni.downloadFile(&#123;</span><br><span class="line">        url:<span class="string">"http://127.0.0.1:8000/api/image.jpg"</span>, <span class="comment">// 下载文件地址</span></span><br><span class="line">        success:<span class="function"><span class="params">res</span> =&gt;</span>&#123; <span class="comment">// 成功的回调函数</span></span><br><span class="line">            <span class="built_in">console</span>.log(res); <span class="comment">// 返回值</span></span><br><span class="line">            <span class="built_in">console</span>.log(res.tempFilePath); <span class="comment">// 下载文件的存放路径</span></span><br><span class="line">            <span class="built_in">console</span>.log(res.statusCode); <span class="comment">// 返回值的状态码 通常为200成功</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="2-路由跳转篇"><a href="#2-路由跳转篇" class="headerlink" title="2.路由跳转篇"></a>2.路由跳转篇</h2><p><code>uni.navigateTo</code>    页面跳转(非<code>TabBar</code>定义页面)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">uni.navigateTo(&#123;</span><br><span class="line">    url: <span class="string">'../look/look'</span>, <span class="comment">// 跳转页面地址</span></span><br><span class="line">    animationType:<span class="string">"auto"</span>, <span class="comment">// 动画效果</span></span><br><span class="line">    animationDuration:<span class="number">300</span>, <span class="comment">// 动画播放时长</span></span><br><span class="line">    success: res =&gt; &#123;&#125;, </span><br><span class="line">    fail: () =&gt; &#123;&#125;,</span><br><span class="line">    complete: () =&gt; &#123;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>uni.redirectTo</code>    关闭当前页面，跳转到应用内的某个页面(非<code>TabBar</code>定义页面)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">uni.redirectTo(&#123;</span><br><span class="line">    url: <span class="string">'../look/look'</span>,</span><br><span class="line">    success: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">    fail: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">    complete: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>uni.reLaunch</code>     关闭所有页面，打开到应用内的某个页面</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">uni.reLaunch(&#123;</span><br><span class="line">    url:<span class="string">'../look/look'</span>,</span><br><span class="line">    success: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">    fail: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">    complete: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>uni.switchTab</code>     跳转到 <code>TabBar</code>页面，并关闭其他所有非 <code>TabBar</code>页面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">uni.switchTab(&#123;</span><br><span class="line">    url:<span class="string">'../look/look'</span>,</span><br><span class="line">    success: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">    fail: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">    complete: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>uni.navigateBack</code> 关闭当前页面，返回上一页面或多级页面。可通过 <code>getCurrentPages()</code> 获取当前的页面栈，决定需要返回几层。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uni.navigateBack(&#123;</span><br><span class="line">    delta:<span class="number">1</span>, <span class="comment">// 返回层级数量</span></span><br><span class="line">    animationType:<span class="string">'auto'</span>,</span><br><span class="line">    animationDuration:<span class="number">300</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="3-窗体通讯篇"><a href="#3-窗体通讯篇" class="headerlink" title="3.窗体通讯篇"></a>3.窗体通讯篇</h2><p><code>Navigator</code> 跳转窗体通讯,以<code>uni.navgateTo</code>为例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">uni.navigateTo(&#123;</span><br><span class="line">    url: <span class="string">'../look/look?id=1'</span>,</span><br><span class="line">    animationType:<span class="string">"auto"</span>,</span><br><span class="line">    animationDuration:<span class="number">300</span>, </span><br><span class="line">    success: <span class="function"><span class="params">res</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">    fail: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">    complete: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// look窗体中的接收参数代码</span></span><br><span class="line">onLoad:<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res.id) <span class="comment">// 接收id参数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种传参方式简单,但是缺陷是<code>url</code>一旦过长就会出现被截断的情况,所以延伸出来更优的传参方式</p>
<p><code>uni.$emit</code> 发起事件传参</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">uni.$emit(</span><br><span class="line">    <span class="string">"param"</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        username:<span class="string">"DragonFire"</span>,</span><br><span class="line">        description:<span class="string">"这是一个传说级的程序员"</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><code>uni.$on</code> 监听事件获取<code>uni.$emit</code>传递后的参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onLoad() &#123;</span><br><span class="line">    uni.$on(<span class="string">"param"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data.username);</span><br><span class="line">        <span class="built_in">console</span>.log(data.description);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>uni.$onec</code> 监听事件获取<code>uni.$emit</code>传递后的参数,并且销毁事件传递</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onLoad() &#123;</span><br><span class="line">    uni.$once(<span class="string">"param"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data.username);</span><br><span class="line">        <span class="built_in">console</span>.log(data.description);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>uni.$off</code> 销毁事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uni.$off(<span class="string">'param'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;&#125;)</span><br></pre></td></tr></table></figure>

<p>第二种方式传递数据时,每次都要对事件进行监听,一不小心就会造成事件错误</p>
<p>第三种传递的方式就厉害了</p>
<p>利用<code>Vue.js</code> 中的全局变量进行传递参数</p>
<p><code>Vue.prototype</code> 利用全局传递参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line">Vue.prototype.userInfo = &#123;</span><br><span class="line">	username:<span class="string">""</span>,</span><br><span class="line">	description:<span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传递赋值页面</span></span><br><span class="line"><span class="keyword">this</span>.userInfo.username = <span class="string">"DragonFire"</span></span><br><span class="line"><span class="keyword">this</span>.userInfo.description = <span class="string">"666"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 取值页面</span></span><br><span class="line"><span class="keyword">this</span>.userInfo.username</span><br><span class="line"><span class="keyword">this</span>.userInfo.description</span><br></pre></td></tr></table></figure>

<h2 id="4-数据缓存篇"><a href="#4-数据缓存篇" class="headerlink" title="4.数据缓存篇"></a>4.数据缓存篇</h2><p><code>Session</code>  <code>Cookie</code></p>
<p><code>uni.setStorage</code> 数据缓存,异步存储</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 存储单个数据</span></span><br><span class="line">uni.setStorage(&#123;</span><br><span class="line">    key : <span class="string">"username"</span>, <span class="comment">// key</span></span><br><span class="line">    data : <span class="string">"DragonFire"</span>, <span class="comment">// value 只能是字符串</span></span><br><span class="line">    success: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存储Object数据(字典)</span></span><br><span class="line">uni.setStorage(&#123;</span><br><span class="line">    key : <span class="string">"userInfo"</span>,</span><br><span class="line">    data : <span class="built_in">JSON</span>.stringify(</span><br><span class="line">        &#123;</span><br><span class="line">            username:<span class="string">"DragonFire"</span>,</span><br><span class="line">            description:<span class="string">"666"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ),</span><br><span class="line">    success: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>uni.setStorageSync</code> 数据缓存,同步存储</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 存储单个数据</span></span><br><span class="line">uni.setStorageSync(<span class="string">"username"</span>,<span class="string">"DragonFire"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存储Object数据(字典)</span></span><br><span class="line">uni.setStorageSync(</span><br><span class="line">    <span class="string">"userInfo"</span>,</span><br><span class="line">    <span class="built_in">JSON</span>.stringify(</span><br><span class="line">        &#123;</span><br><span class="line">            username:<span class="string">"DragonFire"</span>,</span><br><span class="line">            description:<span class="string">"666"</span></span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><code>uni.getStorage</code> 获取数据,异步获取</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">uni.getStorage(&#123;</span><br><span class="line">    key: <span class="string">'username'</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data.data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>uni.getStorageSync</code> 获取数据,同步获取</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = uni.getStorageSync(<span class="string">'username'</span>);</span><br></pre></td></tr></table></figure>

<p><code>uni.getStorageInfo</code> 获取所有Storage中的数据,异步获取</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">uni.getStorageInfo(&#123;</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data.username);</span><br><span class="line">        <span class="built_in">console</span>.log(data.currentSize); <span class="comment">// 当前占用的空间大小, 单位：kb</span></span><br><span class="line">        <span class="built_in">console</span>.log(data.limitSize); <span class="comment">// 限制的空间大小, 单位：kb</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>uni.getStorageInfoSync</code> 获取所有Storage中的数据,同步获取</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> storageInfo = uni.getStorageInfoSync();</span><br></pre></td></tr></table></figure>

<p><code>uni.removeStorage</code> <code>uni.removeStorageSync</code> 删除某个缓存数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步删除某值</span></span><br><span class="line">uni.removeStorage(&#123;</span><br><span class="line">    key: <span class="string">'username'</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'success'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步删除</span></span><br><span class="line">uni.removeStorageSync(<span class="string">'username'</span>);</span><br></pre></td></tr></table></figure>

<p><code>uni.clearStorage</code> <code>uni.clearStorageSync</code> 清除本地缓存数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步清除</span></span><br><span class="line">uni.clearStorage()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步清除</span></span><br><span class="line">uni.clearStorageSync()</span><br></pre></td></tr></table></figure>

<h2 id="5-媒体流篇"><a href="#5-媒体流篇" class="headerlink" title="5.媒体流篇"></a>5.媒体流篇</h2><h3 id="1-图片媒体接口"><a href="#1-图片媒体接口" class="headerlink" title="1.图片媒体接口"></a>1.图片媒体接口</h3><h4 id="1-uni-chooseImage-选择或拍摄图片"><a href="#1-uni-chooseImage-选择或拍摄图片" class="headerlink" title="1.uni.chooseImage 选择或拍摄图片"></a>1.<code>uni.chooseImage</code> 选择或拍摄图片</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">uni.chooseImage(&#123;</span><br><span class="line">    count:<span class="number">1</span>, <span class="comment">// 最多选择多少张照片 9为最大值</span></span><br><span class="line">    sizeType:[<span class="string">"compressed"</span>,<span class="string">"original"</span>], <span class="comment">// 选择图片是否进行压缩</span></span><br><span class="line">    sourceType:[<span class="string">"album"</span>,<span class="string">"camera"</span>], <span class="comment">// 图片的来源是相册还是相机</span></span><br><span class="line">    success: <span class="function">(<span class="params">fileInfo</span>) =&gt;</span> &#123; <span class="comment">// 成功回调函数</span></span><br><span class="line">        <span class="built_in">console</span>.log(fileInfo); <span class="comment">// 选择图片后的文件信息</span></span><br><span class="line">    &#125;,</span><br><span class="line">    fail: <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error);</span><br><span class="line">    &#125;,</span><br><span class="line">    complete: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 选择图片后的文件信息</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">"errMsg"</span>: <span class="string">"chooseImage:ok"</span>,</span><br><span class="line">    <span class="comment">// 图片地址</span></span><br><span class="line">	<span class="attr">"tempFilePaths"</span>: [<span class="string">"_doc/uniapp_temp_1576935806379/compressed/1576935814126.jpg"</span>],</span><br><span class="line">    <span class="comment">// 图片地址及图片大小</span></span><br><span class="line">	<span class="attr">"tempFiles"</span>: [&#123;</span><br><span class="line">		<span class="attr">"path"</span>: <span class="string">"_doc/uniapp_temp_1576935806379/compressed/1576935814126.jpg"</span>,</span><br><span class="line">		<span class="attr">"size"</span>: <span class="number">145648</span></span><br><span class="line">	&#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-uni-perviewImage-预览图片"><a href="#2-uni-perviewImage-预览图片" class="headerlink" title="2.uni.perviewImage 预览图片"></a>2.<code>uni.perviewImage</code> 预览图片</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uni.previewImage(&#123;</span><br><span class="line">    <span class="comment">// 图片地址列表</span></span><br><span class="line">    urls: [<span class="string">"_doc/uniapp_temp_1576936022670/compressed/1576936028716.jpg"</span>],</span><br><span class="line">    success: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125; <span class="comment">// 成功回调函数</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-uni-getImageInfo-查看图片信息"><a href="#3-uni-getImageInfo-查看图片信息" class="headerlink" title="3.uni.getImageInfo 查看图片信息"></a>3.<code>uni.getImageInfo</code> 查看图片信息</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">uni.getImageInfo(&#123;</span><br><span class="line">    <span class="comment">// 图片地址</span></span><br><span class="line">    src:<span class="string">"_doc/uniapp_temp_1576936022670/compressed/1576936028716.jpg"</span>,</span><br><span class="line">    <span class="comment">// 成功回调函数</span></span><br><span class="line">    success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res); <span class="comment">// 图片信息</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 图片信息</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">"errMsg"</span>: <span class="string">"getImageInfo:ok"</span>, </span><br><span class="line">    <span class="comment">// 图片地址</span></span><br><span class="line">	<span class="attr">"path"</span>: <span class="string">"_doc/uniapp_temp_1576936518957/compressed/1576936524898.jpg"</span>,</span><br><span class="line">    <span class="comment">// 图片宽度</span></span><br><span class="line">	<span class="attr">"width"</span>: <span class="number">2000</span>,</span><br><span class="line">    <span class="comment">// 图片高度</span></span><br><span class="line">	<span class="attr">"height"</span>: <span class="number">1500</span>,</span><br><span class="line">    <span class="comment">// 图片的方向</span></span><br><span class="line">	<span class="attr">"orientation"</span>: <span class="string">"up"</span>,</span><br><span class="line">    <span class="comment">// 图片文件格式</span></span><br><span class="line">	<span class="attr">"type"</span>: <span class="string">"jpeg"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-uni-saveImageToPhotosAlbum-保存图片到相册"><a href="#4-uni-saveImageToPhotosAlbum-保存图片到相册" class="headerlink" title="4.uni.saveImageToPhotosAlbum 保存图片到相册"></a>4.<code>uni.saveImageToPhotosAlbum</code> 保存图片到相册</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">uni.saveImageToPhotosAlbum(&#123;</span><br><span class="line">    <span class="comment">// 预保存的图片地址</span></span><br><span class="line">    filePath:<span class="string">"_doc/uniapp_temp_1576936518957/compressed/1576936524898.jpg"</span>,</span><br><span class="line">    <span class="comment">// 保存成功回调函数</span></span><br><span class="line">    success: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 只是个提示而已告诉你已经保存成功,你不会连这段儿代码也拷贝吧,真够懒的</span></span><br><span class="line">        uni.showModal(&#123;</span><br><span class="line">            content: <span class="string">'图片保存成功'</span>,</span><br><span class="line">            showCancel: <span class="literal">false</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="2-录音媒体接口"><a href="#2-录音媒体接口" class="headerlink" title="2.录音媒体接口"></a>2.录音媒体接口</h3><h4 id="uni-getRecorderManager-录音管理对象"><a href="#uni-getRecorderManager-录音管理对象" class="headerlink" title="uni.getRecorderManager 录音管理对象"></a><code>uni.getRecorderManager</code> 录音管理对象</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">size</span>=<span class="string">"mini"</span> @<span class="attr">click</span>=<span class="string">"startreco"</span>&gt;</span>开始录音<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">size</span>=<span class="string">"mini"</span> @<span class="attr">click</span>=<span class="string">"pausereco"</span>&gt;</span>暂停录音<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">size</span>=<span class="string">"mini"</span> @<span class="attr">click</span>=<span class="string">"resumereco"</span>&gt;</span>继续录音<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"warn"</span> <span class="attr">size</span>=<span class="string">"mini"</span> @<span class="attr">click</span>=<span class="string">"stopreco"</span>&gt;</span>停止录音<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">var reco; // 全局录音对象的存储变量</span><br><span class="line">onLoad() &#123;</span><br><span class="line">    reco = uni.getRecorderManager(); // 创建录音对象</span><br><span class="line">	<span class="comment">// 当录音结束时的事件触发</span></span><br><span class="line">    reco.onStop(function(recoFilePath)&#123; // 录音文件存放地址</span><br><span class="line">        console.log("录音停止,文件保存在:"+recoFilePath.tempFilePath);</span><br><span class="line">    &#125;);</span><br><span class="line">	<span class="comment">// 当录音暂停时的事件触发</span></span><br><span class="line">    reco.onPause(function()&#123;</span><br><span class="line">        console.log("录音暂停中.......请点击继续录音按钮");</span><br><span class="line">    &#125;);</span><br><span class="line">	<span class="comment">// 当录音继续时的事件触发</span></span><br><span class="line">    reco.onResume(function()&#123;</span><br><span class="line">        console.log("录音继续了.......");</span><br><span class="line">    &#125;);</span><br><span class="line">	<span class="comment">// 当录音开始时的事件触发</span></span><br><span class="line">    reco.onStart(function()&#123;</span><br><span class="line">        console.log("已经开始录音.......")</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">methods: &#123;</span><br><span class="line">    stopreco:function()&#123;</span><br><span class="line">        reco.stop(); // 停止录音,此后会执行onStop事件触发</span><br><span class="line">    &#125;,</span><br><span class="line">    pausereco:function()&#123;</span><br><span class="line">        reco.pause(); // 暂停录音,触发事件</span><br><span class="line">    &#125;,</span><br><span class="line">    resumereco:function()&#123;</span><br><span class="line">        reco.resume(); // 继续录音,触发事件</span><br><span class="line">    &#125;,</span><br><span class="line">    startreco:function()&#123;</span><br><span class="line">        <span class="comment">// 开始录音并触发onStart事件</span></span><br><span class="line">        reco.start(&#123;</span><br><span class="line">            duration:59000, // 录音最长事件 ms 毫秒级</span><br><span class="line">            sampleRate:16000, // 录音采样率</span><br><span class="line">            numberOfChannels:1, // 录音声道,1单声道,2多声道</span><br><span class="line">            format:"mp3" // 录音文件的音频格式</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>高级实例 :</p>
<p>利用<strong><code>@touchstart</code>按住事件</strong>和<strong><code>@touchend</code>松开事件</strong>,实现按住录音松开结束</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"warn"</span> @<span class="attr">touchstart</span>=<span class="string">"sreco.start()"</span> @<span class="attr">touchend</span>=<span class="string">"sreco.stop()"</span>&gt;</span></span><br><span class="line">        按住松开</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reco;</span><br><span class="line"></span><br><span class="line">data()&#123;</span><br><span class="line">    sreco:<span class="literal">null</span> <span class="comment">// 在页面数据中定义好一个接收录音对象的数据变量</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onLoad() &#123;</span><br><span class="line">    reco = uni.getRecorderManager(); <span class="comment">// 创建录音对象</span></span><br><span class="line">    <span class="keyword">this</span>.sreco = reco; <span class="comment">// 将录音对象赋值</span></span><br><span class="line">    reco.onStop(<span class="function"><span class="keyword">function</span>(<span class="params">recoFilePath</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"录音停止,文件保存在:"</span>+recoFilePath.tempFilePath);</span><br><span class="line">    &#125;)</span><br><span class="line">    reco.onStart(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"已经开始录音......."</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-音频控制接口"><a href="#3-音频控制接口" class="headerlink" title="3.音频控制接口"></a>3.音频控制接口</h3><h4 id="uni-createInnerAudioContext-音频播放管理对象"><a href="#uni-createInnerAudioContext-音频播放管理对象" class="headerlink" title="uni.createInnerAudioContext 音频播放管理对象"></a><code>uni.createInnerAudioContext</code> 音频播放管理对象</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> music = uni.createInnerAudioContext() <span class="comment">// 创建音频管理对象</span></span><br><span class="line">music.src = <span class="string">'static/16.mp3'</span>; <span class="comment">// 音频地址</span></span><br><span class="line">music.currentTime <span class="comment">// 当前播放时间 s</span></span><br><span class="line">music.duration <span class="comment">// 音频总时长 s</span></span><br><span class="line">music.paused <span class="comment">// 音频是否暂停</span></span><br><span class="line">music.buffered <span class="comment">// 音频已缓冲完成的时间点 s</span></span><br><span class="line">music.volume = <span class="number">0.85</span> <span class="comment">// 音量 0 - 1 取值</span></span><br><span class="line">music.startTime = <span class="number">50</span> <span class="comment">// 音频开始播放的时间 s</span></span><br><span class="line">music.loop = <span class="literal">true</span>; <span class="comment">// 是否单曲循环</span></span><br><span class="line">music.autoplay = <span class="literal">true</span>; <span class="comment">// 是否加载完成后自动播放</span></span><br><span class="line">music.play(); <span class="comment">// 开始播放</span></span><br><span class="line">music.pause(); <span class="comment">// 暂停播放</span></span><br><span class="line">music.stop(); <span class="comment">// 停止播放</span></span><br><span class="line">music.seek(<span class="number">35</span>); <span class="comment">// 跳转到35s处开始播放</span></span><br><span class="line">music.destroy(); <span class="comment">// 销毁当前music实例</span></span><br><span class="line"></span><br><span class="line">music.onCanplay(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"音频准备就绪"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">music.onPlay(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"正在播放"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">music.onPause(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"暂停"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">music.onStop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"停止"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">music.onEnded(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"播放完成"</span>)</span><br><span class="line">&#125;)</span><br><span class="line">music.onTimeUpdate(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">""</span>)</span><br><span class="line">&#125;)</span><br><span class="line">music.onSeeking(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"跳转进度中....."</span>)</span><br><span class="line">&#125;)</span><br><span class="line">music.onSeeked(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"跳转进度完成"</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>高级音频管理 : 制作简单的播放器</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">lable</span> <span class="attr">v-if</span>=<span class="string">'curr.name'</span>&gt;</span></span><br><span class="line">                正在播放:&#123;&#123;curr.name&#125;&#125; - &#123;&#123;curr.author&#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">lable</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">lable</span> <span class="attr">v-else</span>&gt;</span>当前无播放曲目<span class="tag">&lt;/<span class="name">lable</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">slider</span> @<span class="attr">change</span>=<span class="string">"gotoTime"</span> <span class="attr">:max</span>=<span class="string">"musicTime"</span> <span class="attr">:value</span>=<span class="string">"playTime"</span> <span class="attr">show-value</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">lable</span> <span class="attr">v-if</span>=<span class="string">'start_pause == true'</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"startplay"</span>&gt;</span>开始播放<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">lable</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">lable</span> <span class="attr">v-if</span>=<span class="string">'start_pause == false'</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"warn"</span> @<span class="attr">click</span>=<span class="string">"stopplay"</span>&gt;</span>停止播放<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">lable</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">lable</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"nextplay"</span>&gt;</span>下一首<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">lable</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _self;</span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> intID;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            curr: &#123;&#125;,</span><br><span class="line">            music_list: </span><br><span class="line">            [</span><br><span class="line">                &#123;</span><br><span class="line">                    name: <span class="string">"留在你身边"</span>,</span><br><span class="line">                    author: <span class="string">"青山黛玛"</span>,</span><br><span class="line">                    src: <span class="string">"static/16.mp3"</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    name: <span class="string">"我就在这里"</span>,</span><br><span class="line">                    author: <span class="string">"青山黛玛"</span>,</span><br><span class="line">                    src: <span class="string">"static/17.mp3"</span></span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            start_pause : <span class="literal">true</span>,</span><br><span class="line">            musicTime: <span class="number">1</span>,</span><br><span class="line">            playTime: <span class="number">0</span>,</span><br><span class="line">            playTools: <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    onLoad() &#123;</span><br><span class="line">        _self = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">this</span>.playTools = uni.createInnerAudioContext();</span><br><span class="line">        <span class="keyword">this</span>.playTools.autoplay = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">this</span>.playTools.onEnded(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">            _self.nextplay();</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">this</span>.playTools.onCanplay(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">            _self.musicTime = _self.playTools.duration;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">this</span>.playTools.onTimeUpdate(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">            _self.playTime = _self.playTools.currentTime;</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">this</span>.playTools.onPlay(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">            _self.playTime = _self.playTools.currentTime;</span><br><span class="line">            _self.start_pause = <span class="literal">false</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">this</span>.playTools.onStop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            _self.start_pause = <span class="literal">true</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        startplay: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.curr = <span class="keyword">this</span>.music_list[i]</span><br><span class="line">            uni.setNavigationBarTitle(&#123;</span><br><span class="line">                title: <span class="keyword">this</span>.curr.name</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">this</span>.playTools.src == <span class="keyword">this</span>.curr.src)&#123;</span><br><span class="line">                <span class="keyword">this</span>.playTools.play();</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.playTools.src = <span class="keyword">this</span>.curr.src;</span><br><span class="line">            &#125;	</span><br><span class="line">        &#125;,</span><br><span class="line">        gotoTime: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> seekTime = res.detail.value; </span><br><span class="line">            <span class="keyword">this</span>.playTools.seek(seekTime);</span><br><span class="line">        &#125;,</span><br><span class="line">        nextplay: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= _self.music_list.length - <span class="number">1</span>) &#123;</span><br><span class="line">                i = <span class="number">0</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            _self.startplay();</span><br><span class="line">        &#125;,</span><br><span class="line">        stopplay:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            _self.playTools.stop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-背景音乐媒体接口"><a href="#4-背景音乐媒体接口" class="headerlink" title="4.背景音乐媒体接口"></a>4.背景音乐媒体接口</h3><h4 id="uni-getBackgroundAudioManager-同上"><a href="#uni-getBackgroundAudioManager-同上" class="headerlink" title="uni.getBackgroundAudioManager 同上"></a><code>uni.getBackgroundAudioManager</code> 同上</h4><h3 id="5-视频媒体接口"><a href="#5-视频媒体接口" class="headerlink" title="5.视频媒体接口"></a>5.视频媒体接口</h3><h4 id="uni-chooseVideo-选择或拍摄视频"><a href="#uni-chooseVideo-选择或拍摄视频" class="headerlink" title="uni.chooseVideo    选择或拍摄视频"></a><code>uni.chooseVideo</code>    选择或拍摄视频</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">view</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"vi"</span>&gt;</span>点击获取视频<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">video</span> <span class="attr">:src</span>=<span class="string">"video_src"</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vi:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    uni.chooseVideo(&#123;</span><br><span class="line">        sourceType:[<span class="string">'camera'</span>, <span class="string">'album'</span>], <span class="comment">// 视频数据来源</span></span><br><span class="line">        camera:<span class="string">"back"</span>, <span class="comment">// 前置或后置摄像头</span></span><br><span class="line">        compressed:<span class="literal">true</span>, <span class="comment">// 视频是否压缩	</span></span><br><span class="line">        success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123; <span class="comment">// 录制成功回调函数</span></span><br><span class="line">            <span class="built_in">console</span>.log(res) <span class="comment">// 录制成功后的视频信息	</span></span><br><span class="line">            _self.video_src = res.tempFilePath;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"errMsg"</span>: <span class="string">"chooseVideo:ok"</span>,</span><br><span class="line">	<span class="attr">"tempFilePath"</span>: <span class="string">"_doc/uniapp_temp_1577007969417/camera/1577008061844.mp4"</span>,</span><br><span class="line">	<span class="attr">"duration"</span>: <span class="string">"4.13"</span>, <span class="comment">// 视频时长</span></span><br><span class="line">	<span class="attr">"size"</span>: <span class="number">21697762</span>, <span class="comment">// 视频大小</span></span><br><span class="line">	<span class="attr">"height"</span>: <span class="string">"2160"</span>, <span class="comment">// 宽度</span></span><br><span class="line">	<span class="attr">"width"</span>: <span class="string">"3840"</span> <span class="comment">// 高度</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="uni-saveVideoToPhotosAlbum-保存视频到相册"><a href="#uni-saveVideoToPhotosAlbum-保存视频到相册" class="headerlink" title="uni.saveVideoToPhotosAlbum 保存视频到相册"></a><code>uni.saveVideoToPhotosAlbum</code> 保存视频到相册</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">uni.saveVideoToPhotosAlbum(&#123;</span><br><span class="line">    filePath:<span class="string">"_doc/uniapp_temp_1577007969417/camera/1577008061844.mp4"</span>,</span><br><span class="line">    success: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"视频保存成功"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="6-视频控制接口"><a href="#6-视频控制接口" class="headerlink" title="6.视频控制接口"></a>6.视频控制接口</h3><p>视频媒体单元是使用本地视频资源,那么网络视频资源和视频资源播放,则需要视频控制单元完成</p>
<p><code>uni.createVideoContext</code>    用法与音频控制单元是如出一辙的</p>
<h3 id="7-相机控制接口-小程序"><a href="#7-相机控制接口-小程序" class="headerlink" title="7.相机控制接口(小程序)"></a>7.相机控制接口(小程序)</h3><p>小程序专用相机控制单元</p>
<h2 id="6-设备篇"><a href="#6-设备篇" class="headerlink" title="6.设备篇"></a>6.设备篇</h2><h3 id="1-系统信息"><a href="#1-系统信息" class="headerlink" title="1.系统信息"></a>1.系统信息</h3><h4 id="uni-getSystemInfo-获取系统完整信息"><a href="#uni-getSystemInfo-获取系统完整信息" class="headerlink" title="uni.getSystemInfo 获取系统完整信息"></a><code>uni.getSystemInfo</code> 获取系统完整信息</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uni.getSystemInfo(&#123;</span><br><span class="line">    success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设备完成信息</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">"errMsg"</span>: <span class="string">"getSystemInfo:ok"</span>,</span><br><span class="line">	<span class="attr">"brand"</span>: <span class="string">"Xiaomi"</span>,</span><br><span class="line">	<span class="attr">"model"</span>: <span class="string">"MI 9 Transparent Edition"</span>,</span><br><span class="line">	<span class="attr">"pixelRatio"</span>: <span class="number">2.75</span>,</span><br><span class="line">	<span class="attr">"screenWidth"</span>: <span class="number">392</span>,</span><br><span class="line">	<span class="attr">"screenHeight"</span>: <span class="number">850</span>,</span><br><span class="line">	<span class="attr">"windowWidth"</span>: <span class="number">392</span>,</span><br><span class="line">	<span class="attr">"windowHeight"</span>: <span class="number">779</span>,</span><br><span class="line">	<span class="attr">"statusBarHeight"</span>: <span class="number">27</span>,</span><br><span class="line">	<span class="attr">"language"</span>: <span class="string">"zh"</span>,</span><br><span class="line">	<span class="attr">"system"</span>: <span class="string">"10"</span>,</span><br><span class="line">	<span class="attr">"version"</span>: <span class="string">"1.9.9.71970"</span>,</span><br><span class="line">	<span class="attr">"fontSizeSetting"</span>: <span class="string">""</span>,</span><br><span class="line">	<span class="attr">"platform"</span>: <span class="string">"android"</span>,</span><br><span class="line">	<span class="attr">"SDKVersion"</span>: <span class="string">"2.6.1"</span>,</span><br><span class="line">	<span class="attr">"windowTop"</span>: <span class="number">0</span>,</span><br><span class="line">	<span class="attr">"windowBottom"</span>: <span class="number">0</span>,</span><br><span class="line">	<span class="attr">"safeArea"</span>: &#123;</span><br><span class="line">		<span class="attr">"left"</span>: <span class="number">0</span>,</span><br><span class="line">		<span class="attr">"right"</span>: <span class="number">392</span>,</span><br><span class="line">		<span class="attr">"top"</span>: <span class="number">0</span>,</span><br><span class="line">		<span class="attr">"bottom"</span>: <span class="number">779</span>,</span><br><span class="line">		<span class="attr">"width"</span>: <span class="number">392</span>,</span><br><span class="line">		<span class="attr">"height"</span>: <span class="number">779</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="uni-getSystemInfoSync-同步获取"><a href="#uni-getSystemInfoSync-同步获取" class="headerlink" title="uni.getSystemInfoSync 同步获取"></a><code>uni.getSystemInfoSync</code> 同步获取</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sysInfo = uni.getSystemInfoSync();</span><br><span class="line"><span class="built_in">console</span>.log(sysInfo);</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"brand"</span>: <span class="string">"Xiaomi"</span>,</span><br><span class="line">	<span class="attr">"model"</span>: <span class="string">"MI 9 Transparent Edition"</span>,</span><br><span class="line">	<span class="attr">"pixelRatio"</span>: <span class="number">2.75</span>,</span><br><span class="line">	<span class="attr">"screenWidth"</span>: <span class="number">392</span>,</span><br><span class="line">	<span class="attr">"screenHeight"</span>: <span class="number">850</span>,</span><br><span class="line">	<span class="attr">"windowWidth"</span>: <span class="number">392</span>,</span><br><span class="line">	<span class="attr">"windowHeight"</span>: <span class="number">779</span>,</span><br><span class="line">	<span class="attr">"statusBarHeight"</span>: <span class="number">27</span>,</span><br><span class="line">	<span class="attr">"language"</span>: <span class="string">"zh"</span>,</span><br><span class="line">	<span class="attr">"system"</span>: <span class="string">"10"</span>,</span><br><span class="line">	<span class="attr">"version"</span>: <span class="string">"1.9.9.71970"</span>,</span><br><span class="line">	<span class="attr">"fontSizeSetting"</span>: <span class="string">""</span>,</span><br><span class="line">	<span class="attr">"platform"</span>: <span class="string">"android"</span>,</span><br><span class="line">	<span class="attr">"SDKVersion"</span>: <span class="string">"2.6.1"</span>,</span><br><span class="line">	<span class="attr">"windowTop"</span>: <span class="number">0</span>,</span><br><span class="line">	<span class="attr">"windowBottom"</span>: <span class="number">0</span>,</span><br><span class="line">	<span class="attr">"safeArea"</span>: &#123;</span><br><span class="line">		<span class="attr">"left"</span>: <span class="number">0</span>,</span><br><span class="line">		<span class="attr">"right"</span>: <span class="number">392</span>,</span><br><span class="line">		<span class="attr">"top"</span>: <span class="number">0</span>,</span><br><span class="line">		<span class="attr">"bottom"</span>: <span class="number">779</span>,</span><br><span class="line">		<span class="attr">"width"</span>: <span class="number">392</span>,</span><br><span class="line">		<span class="attr">"height"</span>: <span class="number">779</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="uni-canIUse-询问是否可用"><a href="#uni-canIUse-询问是否可用" class="headerlink" title="uni.canIUse 询问是否可用"></a><code>uni.canIUse</code> 询问是否可用</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canI = uni.canIUse(<span class="string">"getSystemInfoSync"</span>); <span class="comment">// 是否可用getSystemInfoSync接口</span></span><br><span class="line"><span class="built_in">console</span>.log(canI);</span><br><span class="line"><span class="comment">// 通常情况是,移动设备无可用接口时才会出现错误,如无法开启红外</span></span><br><span class="line"><span class="comment">// 如 移动设备无罗盘 无距离传感等</span></span><br></pre></td></tr></table></figure>

<h3 id="2-网络状态"><a href="#2-网络状态" class="headerlink" title="2.网络状态"></a>2.网络状态</h3><h4 id="uni-getNetworkType-获取当前设备的网络类型"><a href="#uni-getNetworkType-获取当前设备的网络类型" class="headerlink" title="uni.getNetworkType 获取当前设备的网络类型"></a><code>uni.getNetworkType</code> 获取当前设备的网络类型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uni.getNetworkType(&#123;</span><br><span class="line">    success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"errMsg"</span>: <span class="string">"getNetworkType:ok"</span>,</span><br><span class="line">	<span class="attr">"networkType"</span>: <span class="string">"wifi"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="uni-onNetworkStatusChange-监听当前网络状态"><a href="#uni-onNetworkStatusChange-监听当前网络状态" class="headerlink" title="uni.onNetworkStatusChange 监听当前网络状态"></a><code>uni.onNetworkStatusChange</code> 监听当前网络状态</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uni.onNetworkStatusChange(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"isConnected"</span>: <span class="literal">true</span>,</span><br><span class="line">	<span class="attr">"networkType"</span>: <span class="string">"4g"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">"isConnected"</span>: <span class="literal">true</span>,</span><br><span class="line">	<span class="attr">"networkType"</span>: <span class="string">"wifi"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-加速度计"><a href="#3-加速度计" class="headerlink" title="3.加速度计"></a>3.加速度计</h3><h4 id="uni-onAccelerometerChange-查看加速"><a href="#uni-onAccelerometerChange-查看加速" class="headerlink" title="uni.onAccelerometerChange 查看加速"></a><code>uni.onAccelerometerChange</code> 查看加速</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uni.onAccelerometerChange(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"x"</span>: <span class="number">-23.188807</span>,</span><br><span class="line">	<span class="attr">"y"</span>: <span class="number">-16.028873</span>,</span><br><span class="line">	<span class="attr">"z"</span>: <span class="number">23.797955</span>,</span><br><span class="line">	<span class="attr">"errMsg"</span>: <span class="string">"enableAccelerometer:ok"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>uni.startAccelerometer</code> 开始监听设备加速</p>
<p><code>uni.stopAccelerometer</code> 停止监听设备加速</p>
<h3 id="4-罗盘"><a href="#4-罗盘" class="headerlink" title="4.罗盘"></a>4.罗盘</h3><h4 id="uni-onCompassChange-开启罗盘"><a href="#uni-onCompassChange-开启罗盘" class="headerlink" title="uni.onCompassChange 开启罗盘"></a><code>uni.onCompassChange</code> 开启罗盘</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uni.onCompassChange(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"direction"</span>: <span class="number">0.015625</span>, <span class="comment">// 0 正北 180 正南 90 正东 270 正西 最大值 359</span></span><br><span class="line">	<span class="attr">"errMsg"</span>: <span class="string">"enableCompass:ok"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>uni.startCompass</code> 开始监听罗盘</p>
<p><code>uni.stopCompass</code> 停止监听罗盘</p>
<h4 id="制作小游戏-找不到”北”"><a href="#制作小游戏-找不到”北”" class="headerlink" title="制作小游戏 找不到”北”"></a>制作小游戏 找不到”北”</h4><h3 id="5-打电话"><a href="#5-打电话" class="headerlink" title="5.打电话"></a>5.打电话</h3><p><code>uni.makePhoneCall</code>    调用移动操作系统的拨打电话</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">uni.makePhoneCall(&#123;</span><br><span class="line">    phoneNumber:<span class="string">"10010"</span>,</span><br><span class="line">    success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="6-扫码"><a href="#6-扫码" class="headerlink" title="6.扫码"></a>6.扫码</h3><p><code>uni.scanCode</code>    扫描二维码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">uni.scanCode(&#123;</span><br><span class="line">    scanType:<span class="string">"qrCode"</span>, <span class="comment">// barCode一维码  qrCode二维码 不写则支持所有类型</span></span><br><span class="line">    onlyFromCamera:<span class="literal">false</span>, <span class="comment">// 是否只能使用摄像头扫码</span></span><br><span class="line">    success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 条码信息</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">"scanType"</span>: <span class="string">"CODE_128"</span>, <span class="comment">// 条码类型</span></span><br><span class="line">	<span class="attr">"path"</span>: <span class="string">""</span>, <span class="comment">// 图片地址</span></span><br><span class="line">	<span class="attr">"charSet"</span>: <span class="string">"utf8"</span>,</span><br><span class="line">	<span class="attr">"result"</span>: <span class="string">"4453700257"</span>, <span class="comment">// 条码中的内容</span></span><br><span class="line">	<span class="attr">"errMsg"</span>: <span class="string">"scanCode:ok"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="7-生物认证"><a href="#7-生物认证" class="headerlink" title="7.生物认证"></a>7.生物认证</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">uni.startSoterAuthentication(&#123;</span><br><span class="line">    requestAuthModes:[<span class="string">"fingerPrint"</span>], <span class="comment">// 开启指纹之别</span></span><br><span class="line">    authContent:<span class="string">"请使用指纹认证"</span>, <span class="comment">// 指纹识别显示字符串</span></span><br><span class="line">    challenge:<span class="string">"123456789"</span>, <span class="comment">// 本次验证的有效值</span></span><br><span class="line">    success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123; </span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;,</span><br><span class="line">    fail: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指纹认证失败</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">"authMode"</span>: <span class="string">"fingerPrint"</span>,</span><br><span class="line">	<span class="attr">"errCode"</span>: <span class="number">90010</span>,</span><br><span class="line">	<span class="attr">"errMsg"</span>: <span class="string">"startSoterAuthentication:fail authenticate freeze. please try again later"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 指纹认证成功</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">"authMode"</span>: <span class="string">"fingerPrint"</span>,</span><br><span class="line">	<span class="attr">"errCode"</span>: <span class="number">0</span>,</span><br><span class="line">	<span class="attr">"errMsg"</span>: <span class="string">"startSoterAuthentication:ok"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-振动"><a href="#8-振动" class="headerlink" title="8.振动"></a>8.振动</h3><h4 id="uni-vibrateLong-长振动"><a href="#uni-vibrateLong-长振动" class="headerlink" title="uni.vibrateLong     长振动"></a><code>uni.vibrateLong</code>     长振动</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uni.vibrateLong(&#123;</span><br><span class="line">    success: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"舒服吗?"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="uni-vibrateShort-短振动"><a href="#uni-vibrateShort-短振动" class="headerlink" title="uni.vibrateShort        短振动"></a><code>uni.vibrateShort</code>        短振动</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uni.vibrateShort(&#123;</span><br><span class="line">    success: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"时间太短了?"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="7-界面篇"><a href="#7-界面篇" class="headerlink" title="7.界面篇"></a>7.界面篇</h2><h3 id="1-交互反馈"><a href="#1-交互反馈" class="headerlink" title="1.交互反馈"></a>1.交互反馈</h3><h4 id="uni-showToast-提示框"><a href="#uni-showToast-提示框" class="headerlink" title="uni.showToast    提示框"></a><code>uni.showToast</code>    提示框</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">uni.showToast(&#123;</span><br><span class="line">    title: <span class="string">'小提示框'</span>, <span class="comment">// 提示内容</span></span><br><span class="line">    icon: <span class="string">'success'</span>, <span class="comment">// 图标</span></span><br><span class="line">    image: <span class="string">'../../static/girl.jpg'</span>, <span class="comment">// 图片 与图标冲突</span></span><br><span class="line">    mask:<span class="literal">false</span>, <span class="comment">// 是否开启遮罩</span></span><br><span class="line">    duration:<span class="number">2000</span>, <span class="comment">// 显示时间 默认1500</span></span><br><span class="line">    position:<span class="string">"center"</span>, <span class="comment">// 显示位置 此功能与 图标图片 冲突</span></span><br><span class="line">    success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123; <span class="comment">// 显示成功后的回调函数</span></span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="uni-showLoading-等待提示框"><a href="#uni-showLoading-等待提示框" class="headerlink" title="uni.showLoading    等待提示框"></a><code>uni.showLoading</code>    等待提示框</h4><p><em>此功能需要与<code>uni.hideLoading</code>一起使用</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开启提示框后不会消失</span></span><br><span class="line">uni.showLoading(&#123;</span><br><span class="line">    title:<span class="string">"loading"</span>,</span><br><span class="line">    mask:<span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="uni-hideLoading-关闭提示框"><a href="#uni-hideLoading-关闭提示框" class="headerlink" title="uni.hideLoading    关闭提示框"></a><code>uni.hideLoading</code>    关闭提示框</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uni.hideLoading();</span><br></pre></td></tr></table></figure>

<h4 id="uni-showModal-显示对话框"><a href="#uni-showModal-显示对话框" class="headerlink" title="uni.showModal    显示对话框"></a><code>uni.showModal</code>    显示对话框</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">uni.showModal(&#123;</span><br><span class="line">    title:<span class="string">"容貌"</span>,</span><br><span class="line">    content:<span class="string">"我是不是很帅!"</span>,</span><br><span class="line">    showCancel:<span class="literal">true</span>,</span><br><span class="line">    cancelText:<span class="string">"滚"</span>,</span><br><span class="line">    confirmText:<span class="string">"帅呆了"</span>,</span><br><span class="line">    success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"errMsg"</span>: <span class="string">"showModal:ok"</span>,</span><br><span class="line">	<span class="attr">"confirm"</span>: <span class="literal">true</span>,</span><br><span class="line">	<span class="attr">"cancel"</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="uni-showActionSheet-显示菜单"><a href="#uni-showActionSheet-显示菜单" class="headerlink" title="uni.showActionSheet    显示菜单"></a><code>uni.showActionSheet</code>    显示菜单</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">uni.showActionSheet(&#123;</span><br><span class="line">    itemList:[<span class="string">"帅"</span>,<span class="string">"帅呆"</span>,<span class="string">"帅呆了"</span>,<span class="string">"Yo"</span>,<span class="string">"Hi Yo"</span>],</span><br><span class="line">    itemColor:<span class="string">"#007AFF"</span>,</span><br><span class="line">    success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"errMsg"</span>: <span class="string">"showActionSheet:ok"</span>,</span><br><span class="line">	<span class="attr">"tapIndex"</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-导航条"><a href="#2-导航条" class="headerlink" title="2.导航条"></a>2.导航条</h3><h4 id="uni-setNavigationBarTitle-导航条文字"><a href="#uni-setNavigationBarTitle-导航条文字" class="headerlink" title="uni.setNavigationBarTitle    导航条文字"></a><code>uni.setNavigationBarTitle</code>    导航条文字</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uni.setNavigationBarTitle(&#123;</span><br><span class="line">    title:<span class="string">"第一次就这么给了你"</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="uni-setNavigationBarColor-导航条及文字背景色"><a href="#uni-setNavigationBarColor-导航条及文字背景色" class="headerlink" title="uni.setNavigationBarColor    导航条及文字背景色"></a><code>uni.setNavigationBarColor</code>    导航条及文字背景色</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">uni.setNavigationBarColor(&#123;</span><br><span class="line">    backgroundColor:<span class="string">"#8A6DE9"</span>,</span><br><span class="line">    frontColor:<span class="string">"#ffffff"</span>,</span><br><span class="line">    animation:&#123;</span><br><span class="line">        duration:<span class="number">2000</span>,</span><br><span class="line">        timingFunc:<span class="string">"linear"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3-TabBar底部选项卡"><a href="#3-TabBar底部选项卡" class="headerlink" title="3.TabBar底部选项卡"></a>3.<code>TabBar</code>底部选项卡</h3><h4 id="uni-setTabBarItem-设置底部选项卡内容"><a href="#uni-setTabBarItem-设置底部选项卡内容" class="headerlink" title="uni.setTabBarItem    设置底部选项卡内容"></a><code>uni.setTabBarItem</code>    设置底部选项卡内容</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">uni.setTabBarItem(&#123;</span><br><span class="line">    index:<span class="number">3</span>,</span><br><span class="line">    iconPath:<span class="string">"../../static/c1.png"</span>,</span><br><span class="line">    selectedIconPath:<span class="string">"../../static/c2.png"</span>,</span><br><span class="line">    text:<span class="string">"Mine"</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="uni-setTabBarStyle-底部选项卡样式"><a href="#uni-setTabBarStyle-底部选项卡样式" class="headerlink" title="uni.setTabBarStyle     底部选项卡样式"></a><code>uni.setTabBarStyle</code>     底部选项卡样式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">uni.setTabBarStyle(&#123;</span><br><span class="line">    backgroundColor:<span class="string">"#007AFF"</span>,</span><br><span class="line">    color:<span class="string">"#ffffff"</span>,</span><br><span class="line">    selectedColor:<span class="string">"#000000"</span>,</span><br><span class="line">    borderStyle:<span class="string">"black"</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="uni-showTabBar-显示隐藏底部选项卡"><a href="#uni-showTabBar-显示隐藏底部选项卡" class="headerlink" title="uni.showTabBar     显示隐藏底部选项卡"></a><code>uni.showTabBar</code>     显示隐藏底部选项卡</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">uni.hideTabBar(&#123;</span><br><span class="line">    animation:<span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">uni.showTabBar(&#123;</span><br><span class="line">    animation:<span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="uni-setTabBarBadge-设置和清空底部选项卡数字角标"><a href="#uni-setTabBarBadge-设置和清空底部选项卡数字角标" class="headerlink" title="uni.setTabBarBadge     设置和清空底部选项卡数字角标"></a><code>uni.setTabBarBadge</code>     设置和清空底部选项卡数字角标</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">uni.setTabBarBadge(&#123;</span><br><span class="line">    index:<span class="number">3</span>,</span><br><span class="line">    text:<span class="number">9</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">uni.removeTabBarBadge(&#123;</span><br><span class="line">    index:<span class="number">3</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="uni-showTabBarRedDot-显示和隐藏底部选项卡红点"><a href="#uni-showTabBarRedDot-显示和隐藏底部选项卡红点" class="headerlink" title="uni.showTabBarRedDot     显示和隐藏底部选项卡红点"></a><code>uni.showTabBarRedDot</code>     显示和隐藏底部选项卡红点</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">uni.showTabBarRedDot(&#123;</span><br><span class="line">    index:<span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">uni.hideTabBarRedDot(&#123;</span><br><span class="line">    index:<span class="number">2</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="4-滚动"><a href="#4-滚动" class="headerlink" title="4.滚动"></a>4.滚动</h3><h4 id="uni-pageScrollTo-滚动到目标"><a href="#uni-pageScrollTo-滚动到目标" class="headerlink" title="uni.pageScrollTo    滚动到目标"></a><code>uni.pageScrollTo</code>    滚动到目标</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uni.pageScrollTo(&#123;</span><br><span class="line">    duration:<span class="number">3000</span>,</span><br><span class="line">    scrollTop:<span class="number">500</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="5-窗口"><a href="#5-窗口" class="headerlink" title="5.窗口"></a>5.窗口</h3><h4 id="uni-onWindowResize-监听窗口变化"><a href="#uni-onWindowResize-监听窗口变化" class="headerlink" title="uni.onWindowResize    监听窗口变化"></a><code>uni.onWindowResize</code>    监听窗口变化</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uni.onWindowResize(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="string">"deviceOrientation"</span>: <span class="string">"portrait"</span>,</span><br><span class="line">	<span class="string">"size"</span>: &#123;</span><br><span class="line">		<span class="string">"windowWidth"</span>: <span class="number">393</span>,</span><br><span class="line">		<span class="string">"windowHeight"</span>: <span class="number">700</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="uni-offWindowResize-取消监听窗口变化"><a href="#uni-offWindowResize-取消监听窗口变化" class="headerlink" title="uni.offWindowResize 取消监听窗口变化"></a><code>uni.offWindowResize</code> 取消监听窗口变化</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uni.offWindowResize(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"取消监听窗口变化"</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="6-下拉刷新"><a href="#6-下拉刷新" class="headerlink" title="6.下拉刷新"></a>6.下拉刷新</h3><p>需要在 <code>pages.json</code> 里，找到的当前页面的pages节点，并在 <code>style</code> 选项中开启 <code>enablePullDownRefresh</code></p>
<p>当处理完数据刷新后，<code>uni.stopPullDownRefresh</code> 可以停止当前页面的下拉刷新</p>
<h4 id="onPullDownRefresh开启下拉刷新"><a href="#onPullDownRefresh开启下拉刷新" class="headerlink" title="onPullDownRefresh开启下拉刷新"></a><code>onPullDownRefresh</code>开启下拉刷新</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"path"</span> : <span class="string">"pages/look/look"</span>,</span><br><span class="line">    <span class="attr">"style"</span> : &#123;</span><br><span class="line">        <span class="attr">"enablePullDownRefresh"</span>:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">onPullDownRefresh: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"正在下拉刷新"</span>);</span><br><span class="line">    uni.request(&#123;</span><br><span class="line">        url: <span class="string">'http://192.168.1.102:8000/api/manager/getteacher/'</span>,</span><br><span class="line">        method: <span class="string">'GET'</span>,</span><br><span class="line">        data: &#123;&#125;,</span><br><span class="line">        success: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(res);</span><br><span class="line">            uni.stopPullDownRefresh();</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"结束下拉刷新"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        fail: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">        complete: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-字体"><a href="#7-字体" class="headerlink" title="7.字体"></a>7.字体</h3><h4 id="uni-loadFontFac-更换字体"><a href="#uni-loadFontFac-更换字体" class="headerlink" title="uni.loadFontFac 更换字体"></a><code>uni.loadFontFac</code> 更换字体</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">uni.loadFontFace(&#123;</span><br><span class="line">  family: <span class="string">'Bitstream Vera Serif Bold'</span>,</span><br><span class="line">  source: <span class="string">'url("https://sungd.github.io/Pacifico.ttf")'</span>,</span><br><span class="line">  success() &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'success'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>





        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>马云昊</span>
                    </p>
                
                
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>愚者不努力 懒人盼巅峰</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/uni-app/"># uni-app</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();" target="_blank" rel="noopener">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2018/11/01/Websocket%E5%88%9D%E8%AF%86/">Websocket初识</a>
            
            
            <a class="next" rel="next" href="/2018/10/27/uni-app%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F,%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6/">uni-app生命周期和基础组件</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© 马云昊 | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
